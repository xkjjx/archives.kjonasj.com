<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: CalendarController
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "CalendarController";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo;
    
    
    <span class="title">CalendarController</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: CalendarController
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="OfficerApplicationController.html" title="OfficerApplicationController (class)">OfficerApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next"><span class='object_link'><a href="AuthenticatedApplicationController.html" title="AuthenticatedApplicationController (class)">AuthenticatedApplicationController</a></span></li>
          
            <li class="next"><span class='object_link'><a href="OfficerApplicationController.html" title="OfficerApplicationController (class)">OfficerApplicationController</a></span></li>
          
            <li class="next">CalendarController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/controllers/calendar_controller.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>CalendarController provides actions for managing Google Calendar events related to Engineers Without Borders (EWB) calendars. Inherits access control from OfficerApplicationController, ensuring only users with officer-level permissions can access these actions.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="EWB_CALENDAR_IDS-constant" class="">EWB_CALENDAR_IDS =
          <div class="docstring">
  <div class="discussion">
    
<p>Constant for valid EWB calendar IDs, used to limit access to specific calendars only.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>c_35657eacaf7df0315b9988c9b68e72be62b3d78e730edd6583459300f61320db@group.calendar.google.com</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calendars-instance_method" title="#calendars (instance method)">#<strong>calendars</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Lists calendars available to the user, filtering to show only EWB calendars.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_event-instance_method" title="#delete_event (instance method)">#<strong>delete_event</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes an event from a specified EWB calendar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#edit_event-instance_method" title="#edit_event (instance method)">#<strong>edit_event</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays edit form for a specific event in a specified EWB calendar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#event-instance_method" title="#event (instance method)">#<strong>event</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays details for a single event in a specified EWB calendar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#events-instance_method" title="#events (instance method)">#<strong>events</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays all events for a specified EWB calendar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_event-instance_method" title="#new_event (instance method)">#<strong>new_event</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new event in the specified EWB calendar.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_event-instance_method" title="#update_event (instance method)">#<strong>update_event</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates an existing event in a specified EWB calendar.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="calendars-instance_method">
  
    #<strong>calendars</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Lists calendars available to the user, filtering to show only EWB calendars.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_calendars'>calendars</span>
  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>
  <span class='ivar'>@calendar_list</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_calendar_lists'>list_calendar_lists</span><span class='period'>.</span><span class='id identifier rubyid_items'>items</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_calendar'>calendar</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_calendar'>calendar</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_events_url'>events_url</span><span class='lparen'>(</span><span class='label'>calendar_id:</span> <span class='ivar'>@calendar_list</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@calendar_list</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_event-instance_method">
  
    #<strong>delete_event</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Deletes an event from a specified EWB calendar.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_event'>delete_event</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:alert</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid calendar ID - only EWB calendars are supported.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_calendars_path'>calendars_path</span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_delete_event'>delete_event</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_events_url'>events_url</span><span class='lparen'>(</span><span class='label'>calendar_id:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="edit_event-instance_method">
  
    #<strong>edit_event</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Displays edit form for a specific event in a specified EWB calendar.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_edit_event'>edit_event</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:alert</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid calendar ID - only EWB calendars are supported.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_calendars_path'>calendars_path</span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>
  <span class='ivar'>@event</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_event'>get_event</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@calendar_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="event-instance_method">
  
    #<strong>event</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Displays details for a single event in a specified EWB calendar.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95
96
97
98
99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_event'>event</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:alert</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid calendar ID - only EWB calendars are supported.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_calendars_path'>calendars_path</span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>
  <span class='ivar'>@event</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_event'>get_event</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@calendar_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="events-instance_method">
  
    #<strong>events</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Displays all events for a specified EWB calendar.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81
82
83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_events'>events</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:alert</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid calendar ID - only EWB calendars are supported.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_calendars_path'>calendars_path</span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>
  <span class='ivar'>@event_list</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_events'>list_events</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@calendar_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new_event-instance_method">
  
    #<strong>new_event</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Creates a new event in the specified EWB calendar. Redirects with an alert if the calendar ID is invalid.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 19</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_event'>new_event</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:alert</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid calendar ID - only EWB calendars are supported.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_calendars_path'>calendars_path</span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>

  <span class='comment'># Sets event start and end times
</span>  <span class='id identifier rubyid_start_date_time'>start_date_time</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:start_datetime</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_end_date_time'>end_date_time</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:end_datetime</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_end_date'>end_date</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'># Creates the event with the provided parameters
</span>  <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>Event</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>summary:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>start:</span> <span class='id identifier rubyid_start_date_time'>start_date_time</span> <span class='op'>?</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date_time:</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_date_time'>start_date_time</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span> <span class='op'>+</span> <span class='int'>6</span><span class='period'>.</span><span class='id identifier rubyid_hours'>hours</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date:</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>end:</span> <span class='id identifier rubyid_end_date_time'>end_date_time</span> <span class='op'>?</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date_time:</span> <span class='lparen'>(</span><span class='id identifier rubyid_end_date_time'>end_date_time</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span> <span class='op'>+</span> <span class='int'>6</span><span class='period'>.</span><span class='id identifier rubyid_hours'>hours</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date:</span> <span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>description:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_insert_event'>insert_event</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_events_url'>events_url</span><span class='lparen'>(</span><span class='label'>calendar_id:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_event-instance_method">
  
    #<strong>update_event</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Updates an existing event in a specified EWB calendar.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/calendar_controller.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_event'>update_event</span>
  <span class='kw'>unless</span> <span class='const'><span class='object_link'><a href="#EWB_CALENDAR_IDS-constant" title="CalendarController::EWB_CALENDAR_IDS (constant)">EWB_CALENDAR_IDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:alert</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid calendar ID - only EWB calendars are supported.</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_calendars_path'>calendars_path</span> <span class='kw'>and</span> <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_service'>service</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>CalendarService</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_authorization'>authorization</span> <span class='op'>=</span> <span class='ivar'>@client</span>

  <span class='comment'># Sets updated start and end times
</span>  <span class='id identifier rubyid_start_date_time'>start_date_time</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:start_datetime</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_end_date_time'>end_date_time</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:end_datetime</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_start_date'>start_date</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:start_date</span><span class='rbracket'>]</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_end_date'>end_date</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:end_date</span><span class='rbracket'>]</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'># Updates the event with new parameters
</span>  <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>Event</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>summary:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>start:</span> <span class='id identifier rubyid_start_date_time'>start_date_time</span> <span class='op'>?</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date_time:</span> <span class='lparen'>(</span><span class='id identifier rubyid_start_date_time'>start_date_time</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span> <span class='op'>+</span> <span class='int'>6</span><span class='period'>.</span><span class='id identifier rubyid_hours'>hours</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date:</span> <span class='id identifier rubyid_start_date'>start_date</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>end:</span> <span class='id identifier rubyid_end_date_time'>end_date_time</span> <span class='op'>?</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date_time:</span> <span class='lparen'>(</span><span class='id identifier rubyid_end_date_time'>end_date_time</span><span class='period'>.</span><span class='id identifier rubyid_to_time'>to_time</span> <span class='op'>+</span> <span class='int'>6</span><span class='period'>.</span><span class='id identifier rubyid_hours'>hours</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rfc3339'>rfc3339</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>Google</span><span class='op'>::</span><span class='const'>Apis</span><span class='op'>::</span><span class='const'>CalendarV3</span><span class='op'>::</span><span class='const'>EventDateTime</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>date:</span> <span class='id identifier rubyid_end_date'>end_date</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>description:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:description</span><span class='rbracket'>]</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_update_event'>update_event</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_event_url'>event_url</span><span class='lparen'>(</span><span class='label'>calendar_id:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:calendar_id</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>event_id:</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:event_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Nov  5 01:27:35 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.1.2).
</div>

    </div>
  </body>
</html>